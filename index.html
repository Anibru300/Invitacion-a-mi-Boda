<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Invitaci√≥n | Boda de Carlos & Jimena</title>
  <meta name="description" content="Te invitamos a celebrar nuestra boda. Acomp√°√±anos en este d√≠a inolvidable." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#070a12;
      --card:#12121a;
      --text:#f5f5f7;
      --muted:#b7b7c2;
      --gold:#caa24a;
      --line:rgba(202,162,74,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background: radial-gradient(1200px 600px at 30% -10%, rgba(202,162,74,.18), transparent 55%),
                  radial-gradient(900px 600px at 90% 10%, rgba(255,255,255,.06), transparent 60%),
                  var(--bg);
    }
    .wrap{max-width:980px;margin:0 auto;padding:22px 16px 80px}
    .hidden{display:none !important;}

    /* =========================
       PORTADA (pantalla principal)
       ========================= */
    .cover{
      min-height: calc(100vh - 44px);
      display:grid;
      place-items:center;
      padding: 28px 16px;
    }
    .coverCard{
      width:min(760px, 100%);
      aspect-ratio: 16/10;
      border-radius:22px;
      border:1px solid var(--line);
      position:relative;
      overflow:hidden;
      background:
        linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55)),
        url("cover.png") center/cover no-repeat;
      box-shadow: 0 22px 80px rgba(0,0,0,.55);
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
    }
    /* Si cover.png no existe a√∫n, se ver√° el gradiente */
    .coverCard.fallback{
      background: radial-gradient(800px 480px at 50% 30%, rgba(202,162,74,.14), transparent 55%),
                  linear-gradient(180deg, rgba(10,14,30,.9), rgba(5,7,16,.95));
    }
    .coverInner{
      padding:28px 16px;
      width:min(520px, 95%);
    }
    .kicker{
      font-size:22px;
      letter-spacing:.02em;
      margin:0 0 10px;
    }
    .names{
      font-family:"Cormorant Garamond", serif;
      font-weight:600;
      margin: 0 0 14px;
      font-size:52px;
      line-height:1.05;
      color: #f6e7c0;
      text-shadow: 0 10px 30px rgba(0,0,0,.45);
    }
    .dateLine{
      font-size:22px;
      margin:0 0 22px;
      color:rgba(255,255,255,.92);
    }
    .openBtn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:14px 20px;
      border-radius:999px;
      border:1px solid rgba(202,162,74,.65);
      background:rgba(202,162,74,.22);
      color:var(--text);
      text-decoration:none;
      font-weight:700;
      cursor:pointer;
      min-width: 220px;
      backdrop-filter: blur(6px);
    }
    .openBtn:hover{background:rgba(202,162,74,.28)}
    .smallNote{
      margin-top:14px;
      color:rgba(255,255,255,.75);
      font-size:12px;
    }

    /* =========================
       CONTENIDO
       ========================= */
    .hero{
      margin-top:16px;
      padding:26px 18px 18px;
      border:1px solid var(--line);
      border-radius:20px;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
      backdrop-filter: blur(6px);
      text-align:center;
    }
    h1{
      font-family:"Cormorant Garamond", serif;
      font-weight:600;
      margin:0 0 6px;
      font-size:42px;
      letter-spacing:.02em;
    }
    .sub{
      margin:0 auto;
      max-width:720px;
      color:var(--muted);
      line-height:1.55;
      font-size:15px;
    }
    .divider{width:120px;height:1px;background:var(--line);margin:14px auto;}
    .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:14px;}
    @media(min-width:760px){.grid{grid-template-columns:1.2fr .8fr}}
    .card{
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      background:rgba(18,18,26,.70);
      padding:18px;
    }
    .card h2{
      font-size:14px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:var(--gold);
      margin:0 0 10px;
    }
    .row{display:grid;grid-template-columns:1fr;gap:10px;}
    @media(min-width:760px){.row{grid-template-columns:1fr 1fr}}
    .item{
      padding:12px;
      border:1px solid rgba(255,255,255,.08);
      border-radius:14px;
      background:rgba(0,0,0,.18);
    }
    .label{color:var(--muted);font-size:12px;margin-bottom:6px}
    .value{font-size:15px;line-height:1.35}
    .btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    a.btn, button.btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:12px 14px;border-radius:14px;
      border:1px solid rgba(202,162,74,.55);
      color:var(--text);text-decoration:none;
      background:rgba(202,162,74,.10);
      font-weight:700;font-size:14px;
      cursor:pointer;
    }
    .btn.secondary{
      border-color:rgba(255,255,255,.14);
      background:rgba(255,255,255,.05);
    }

    /* Contador */
    .countdown{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:14px}
    .cd{min-width:92px;padding:10px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18);text-align:center;}
    .cd .n{font-size:22px;font-weight:800}
    .cd .u{font-size:11px;color:var(--muted);letter-spacing:.12em;text-transform:uppercase}

    /* QR */
    .qrwrap{display:grid;grid-template-columns:1fr;gap:12px;margin-top:10px;}
    .qrbox{display:flex;gap:12px;align-items:center;padding:12px;border-radius:14px;border:1px dashed rgba(255,255,255,.16);background:rgba(0,0,0,.12);}
    .qr{width:92px;height:92px;background:#fff;border-radius:10px;padding:8px;display:flex;align-items:center;justify-content:center;flex:0 0 auto;}
    .qr svg, .qr canvas{width:100% !important;height:100% !important}
    .qtxt .t{font-weight:800}
    .qtxt .d{color:var(--muted);font-size:12px;margin-top:2px;line-height:1.35}

    /* RSVP */
    .rsvpForm{display:grid;gap:10px;margin-top:10px}
    .inp{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.18);
      color:var(--text);
      outline:none;
      font-size:14px;
    }
    .two{display:grid;gap:10px}
    @media(min-width:760px){.two{grid-template-columns:1fr 1fr}}
    .hint{color:var(--muted);font-size:12px;line-height:1.45}
    .ok{color:#b7f7c2;font-size:13px;margin-top:8px}
    .err{color:#ffb6b6;font-size:13px;margin-top:8px}

    /* YouTube player oculto */
    #ytWrap{position:absolute;left:-9999px;top:-9999px;width:1px;height:1px;overflow:hidden;}
  </style>
</head>

<body>
  <!-- PORTADA -->
  <section class="cover" id="cover">
    <div class="coverCard" id="coverCard">
      <div class="coverInner">
        <p class="kicker">Nuestra Boda</p>
        <h2 class="names">Carlos y Jimena</h2>
        <p class="dateLine">29 ¬∑ Agosto ¬∑ 2026</p>
        <button class="openBtn" id="openInvite">Abrir invitaci√≥n</button>
        <div class="smallNote">Tip: al abrir, podr√°s activar la m√∫sica üéª</div>
      </div>
    </div>
  </section>

  <!-- CONTENIDO (oculto hasta abrir) -->
  <div class="wrap hidden" id="content">
    <section class="hero">
      <h1>¬°Nos casamos!</h1>
      <div class="divider"></div>
      <p class="sub">
        Nos llena de alegr√≠a invitarte a celebrar con nosotros este d√≠a tan especial.
      </p>

      <div class="countdown" aria-label="Cuenta regresiva">
        <div class="cd"><div class="n" id="d">‚Äî</div><div class="u">D√≠as</div></div>
        <div class="cd"><div class="n" id="h">‚Äî</div><div class="u">Horas</div></div>
        <div class="cd"><div class="n" id="m">‚Äî</div><div class="u">Min</div></div>
        <div class="cd"><div class="n" id="s">‚Äî</div><div class="u">Seg</div></div>
      </div>

      <div class="btns" style="justify-content:center;margin-top:14px">
        <button class="btn" id="btnMusic">Activar m√∫sica</button>
      </div>
      <div class="hint">La mayor√≠a de celulares bloquean audio autom√°tico; por eso se activa con este bot√≥n.</div>
    </section>

    <div class="grid">
      <section class="card">
        <h2>Detalles del evento</h2>

        <div class="row">
          <div class="item">
            <div class="label">Fecha</div>
            <div class="value">S√°bado 29 de Agosto de 2026</div>
          </div>
          <div class="item">
            <div class="label">Hora</div>
            <div class="value">5:00 PM <span class="hint">(edita si es otra)</span></div>
          </div>
          <div class="item">
            <div class="label">Lugar</div>
            <div class="value">EDITA AQU√ç: Sal√≥n / Iglesia</div>
          </div>
          <div class="item">
            <div class="label">Direcci√≥n</div>
            <div class="value">EDITA AQU√ç: Direcci√≥n corta</div>
          </div>
        </div>

        <div class="btns">
          <!-- EDITA AQU√ç: pega tu link real de Google Maps -->
          <a class="btn" id="btnMaps" href="https://maps.google.com/?q=Le%C3%B3n+Guanajuato" target="_blank" rel="noopener">Ver ubicaci√≥n</a>
        </div>

        <h2 style="margin-top:18px">Confirmaci√≥n (RSVP) ‚Äî nivel pro</h2>

        <div class="hint">
          Puedes compartir links personalizados as√≠:<br>
          <b>.../Invitacion-a-mi-Boda/?g=Juan%20Perez&k=ABC123</b><br>
          Eso rellena el nombre y deja un c√≥digo de invitado.
        </div>

        <form class="rsvpForm" id="rsvpForm">
          <div class="two">
            <input class="inp" id="guestName" placeholder="Tu nombre" required />
            <select class="inp" id="attendance" required>
              <option value="" disabled selected>¬øAsistir√°s?</option>
              <option value="S√≠">S√≠, asistir√©</option>
              <option value="No">No podr√© asistir</option>
            </select>
          </div>

          <div class="two">
            <input class="inp" id="pax" type="number" min="1" max="10" value="1" required />
            <input class="inp" id="notes" placeholder="Mensaje / alergias / observaciones (opcional)" />
          </div>

          <button class="btn secondary" type="submit">Enviar confirmaci√≥n</button>

          <div class="hint">
            Por defecto se env√≠a por WhatsApp (r√°pido). Si quieres que adem√°s se guarde en una hoja de c√°lculo,
            te digo c√≥mo conectar un Google Form en 2 minutos.
          </div>

          <div id="rsvpMsg"></div>
        </form>
      </section>

      <aside class="card">
        <h2>C√≥digos QR</h2>

        <div class="qrwrap">
          <div class="qrbox">
            <div class="qr" id="qrInvite"></div>
            <div class="qtxt">
              <div class="t">Abrir invitaci√≥n</div>
              <div class="d">QR directo a este sitio.</div>
            </div>
          </div>

          <div class="qrbox">
            <div class="qr" id="qrMaps"></div>
            <div class="qtxt">
              <div class="t">Ubicaci√≥n</div>
              <div class="d">QR directo a Google Maps.</div>
            </div>
          </div>

          <div class="qrbox">
            <div class="qr" id="qrRsvp"></div>
            <div class="qtxt">
              <div class="t">Confirmaci√≥n</div>
              <div class="d">QR directo a RSVP.</div>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- YouTube (oculto) -->
  <div id="ytWrap">
    <div id="player"></div>
  </div>

  <!-- QR lib -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.4/build/qrcode.min.js"></script>
  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    // =========================
    // 1) PORTADA -> ABRIR
    // =========================
    const cover = document.getElementById("cover");
    const content = document.getElementById("content");
    const openBtn = document.getElementById("openInvite");

    // Si cover.png no existe, usamos fallback
    (function coverFallback(){
      const img = new Image();
      img.onload = () => {};
      img.onerror = () => document.getElementById("coverCard").classList.add("fallback");
      img.src = "cover.png";
    })();

    openBtn.addEventListener("click", () => {
      cover.classList.add("hidden");
      content.classList.remove("hidden");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // =========================
    // 2) FECHA / CONTADOR
    // (Cambia la hora si no es 5:00 PM)
    // =========================
    const EVENT_ISO = "2026-08-29T17:00:00-06:00";

    function tick(){
      const now = new Date();
      const eventDate = new Date(EVENT_ISO);
      let diff = eventDate - now;
      if (diff < 0) diff = 0;

      const sec = Math.floor(diff / 1000);
      const d = Math.floor(sec / 86400);
      const h = Math.floor((sec % 86400) / 3600);
      const m = Math.floor((sec % 3600) / 60);
      const s = sec % 60;

      document.getElementById("d").textContent = d;
      document.getElementById("h").textContent = String(h).padStart(2,"0");
      document.getElementById("m").textContent = String(m).padStart(2,"0");
      document.getElementById("s").textContent = String(s).padStart(2,"0");
    }
    tick();
    setInterval(tick, 1000);

    // =========================
    // 3) QR
    // =========================
    const inviteUrl = window.location.href.split("#")[0];
    const mapsUrl = document.getElementById("btnMaps").href;
    const rsvpUrl = inviteUrl + "#rsvp";

    const qrOpts = { margin: 1, width: 170 };
    QRCode.toCanvas(document.getElementById("qrInvite"), inviteUrl, qrOpts);
    QRCode.toCanvas(document.getElementById("qrMaps"), mapsUrl, qrOpts);
    QRCode.toCanvas(document.getElementById("qrRsvp"), rsvpUrl, qrOpts);

    // =========================
    // 4) RSVP "nivel pro"
    // - Lee params ?g=Nombre&k=CODIGO
    // - Env√≠a por WhatsApp con datos + c√≥digo
    // =========================
    function getParam(name){
      return new URLSearchParams(window.location.search).get(name) || "";
    }
    const guestFromUrl = decodeURIComponent(getParam("g") || "");
    const keyFromUrl = (getParam("k") || "").trim();

    const guestName = document.getElementById("guestName");
    if (guestFromUrl) guestName.value = guestFromUrl;

    const rsvpForm = document.getElementById("rsvpForm");
    const rsvpMsg = document.getElementById("rsvpMsg");

    rsvpForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const name = guestName.value.trim();
      const attend = document.getElementById("attendance").value;
      const pax = document.getElementById("pax").value;
      const notes = document.getElementById("notes").value.trim();

      if(!name || !attend || !pax){
        rsvpMsg.innerHTML = '<div class="err">Completa nombre, asistencia y n√∫mero de personas.</div>';
        return;
      }

      // EDITA AQU√ç: tu WhatsApp de confirmaciones (con c√≥digo pa√≠s)
      const WHATSAPP = "5214770000000";

      const msgLines = [
        "Confirmaci√≥n de asistencia - Boda Carlos & Jimena",
        `Nombre: ${name}`,
        `Asistencia: ${attend}`,
        `Personas: ${pax}`,
        notes ? `Notas: ${notes}` : "",
        keyFromUrl ? `C√≥digo invitado: ${keyFromUrl}` : ""
      ].filter(Boolean);

      const text = encodeURIComponent(msgLines.join("\n"));
      const wa = `https://wa.me/${WHATSAPP}?text=${text}`;

      rsvpMsg.innerHTML = '<div class="ok">Listo ‚úÖ Se abrir√° WhatsApp para enviar tu confirmaci√≥n.</div>';
      window.open(wa, "_blank", "noopener");
    });

    // =========================
    // 5) M√∫sica YouTube (IFrame API)
    // Nota: el navegador requiere interacci√≥n del usuario
    // =========================
    // Tu video: https://www.youtube.com/watch?v=yP_dhALIuFc
    const YT_VIDEO_ID = "yP_dhALIuFc";
    let player;

    function onYouTubeIframeAPIReady(){
      player = new YT.Player("player", {
        videoId: YT_VIDEO_ID,
        playerVars: {
          autoplay: 0,
          controls: 0,
          loop: 1,
          playlist: YT_VIDEO_ID,
          modestbranding: 1
        }
      });
    }
    window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;

    document.getElementById("btnMusic").addEventListener("click", async () => {
      try{
        if(!player) return;
        player.setVolume(45);
        player.playVideo();
        document.getElementById("btnMusic").textContent = "M√∫sica activada ‚úì";
      }catch(e){
        alert("No se pudo activar la m√∫sica. Intenta de nuevo.");
      }
    });

    // Para el QR RSVP con #rsvp
    // (cuando abras el sitio con ese hash, baja al formulario)
    window.addEventListener("load", () => {
      if (window.location.hash === "#rsvp") {
        // si a√∫n est√° la portada, la ocultamos
        cover.classList.add("hidden");
        content.classList.remove("hidden");
        setTimeout(() => rsvpForm.scrollIntoView({behavior:"smooth"}), 200);
      }
    });
  </script>
</body>
</html>
